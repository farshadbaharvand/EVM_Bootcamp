# برگه تقلب ماشین مجازی اتریوم (EVM)

## مرور کلی
- **EVM**: ماشین مجازی که روی نرم‌افزار گره اتریوم اجرا می‌شود
- **محیط**: محیطی خودکفا و محدود برای قراردادهای هوشمند
- **مقایسه**: قراردادها وابستگی بیشتری به محیط نسبت به برنامه‌های سنتی (مثلاً پایتون) دارند

## ویژگی‌های کلیدی
- **نوع**: ماشین پشته‌ای (Stack machine)
- **اندازه پشته**: حداکثر ۱۰۲۴ اسلات
- **اندازه کلمه**: ۲۵۶ بیتی (عملیات رمزنگاری را تسهیل می‌کند)
  - امکان هش کردن کارآمد Keccak256
  - پشتیبانی از محاسبات منحنی بیضوی

## نواحی داده
| مکان       | ماندگاری     | محدوده          | هزینه | کلیدواژه   |
|------------|--------------|-----------------|-------|------------|
| **پشته**  | موقت        | اجرای فعلی      | کم    | -          |
| **حافظه** | موقت        | محدوده تابع     | متوسط | `memory`   |
| **ذخیره‌سازی** | دائمی    | سراسر قرارداد  | زیاد  | `storage`  |
| **داده‌فراخوانی** | فقط فراخوانی | محدوده فراخوان | کم    | `calldata` |
| **کد**     | دائمی        | قرارداد         | N/A   | -          |
| **لاگ‌ها** | دائمی        | بلاکچین         | زیاد  | -          |

## ذخیره‌سازی در مقابل حافظه
### ذخیره‌سازی
- بخش دائمی از وضعیت قرارداد
- در تمام توابع قابل دسترسی است
- استفاده (تغییر) پرهزینه است
- فقط در صورت ضرورت استفاده شود
- مثال: `uint256 storage myVar;`

### حافظه
- ذخیره‌سازی موقت
- فقط در محدوده تابع
- پس از اجرا دور انداخته می‌شود
- برای محاسبات موقت استفاده می‌شود
- مثال: `string memory tempStr;`

## بهترین روش‌ها
- عملیات ذخیره‌سازی را به حداقل برسانید (پرهزینه است)
- از حافظه برای محاسبات موقت استفاده کنید
- به محدودیت عمق پشته (۱۰۲۴) توجه داشته باشید
- عملیات را برای کلمات ۲۵۶ بیتی بهینه کنید