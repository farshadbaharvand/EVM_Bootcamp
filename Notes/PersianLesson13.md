# بازی تیمی - قرعه‌کشی

## مرور کلی

هدف از **بازی تیمی - قرعه‌کشی** این است که با تعامل با یک قرارداد هوشمند آسیب‌پذیر در شبکه‌ی آزمایشی **Sepolia** بیشترین امتیاز را برای تیم خود کسب کنید. این بازی عمداً ناامن طراحی شده است تا بازیکنان بتوانند از آسیب‌پذیری‌های آن در **کد قرارداد هوشمند** و **ساختار dApp** سوءاستفاده کنند.

---

## هدف

- **کسب حداکثر امتیاز** برای تیم خود.
- **کاهش امتیاز** سایر تیم‌ها.
- **بررسی** و **استفاده از آسیب‌پذیری‌ها** در قرارداد.
- **امتیاز اضافه**: سرقت ETH ذخیره‌شده در قرارداد (اگر بتوانید).

---

## جزئیات بازی

- **آدرس فرانت‌اند**: [https://lottery.bytecode.lol](https://lottery.bytecode.lol)
- **شبکه**: Sepolia Testnet

شما می‌توانید از طریق رابط کاربری فرانت‌اند ارائه‌شده **یا** مستقیماً از طریق ابزارهای دیگر مانند:
- Remix
- Ethers.js
- Web3.js
- اسکریپت‌های Hardhat/Foundry  
با قرارداد تعامل داشته باشید.

---

## فرآیند ثبت‌نام

قبل از شروع بازی، باید تیم خود را **ثبت‌نام** کنید.

### اطلاعات ثبت‌نام:

- **نام تیم** – رشته‌ای برای شناسایی تیم شما.
- **آدرس کیف پول** – آدرس Ethereum که از آن استفاده خواهید کرد.
- **رمز عبور** – احتمالاً به عنوان بخشی از بذر RNG در قرارداد استفاده می‌شود (ممکن است ناامن باشد).

### هزینه ثبت‌نام:

- `0.01 ETH` (اتر شبکه Sepolia)

### استراتژی ثبت‌نام:

- برای مدیریت مجزای امتیازات، از **کیف پول متفاوت** برای هر تیم استفاده کنید.
- استفاده‌ی مجدد یا چرخشی از نام تیم و رمز عبور می‌تواند به‌صورت راهبردی مؤثر باشد.

---

## نحوه بازی: حدس در قرعه‌کشی

پس از ثبت‌نام تیم، می‌توانید شروع به حدس‌زدن اعداد در قرعه‌کشی کنید.

### مکانیزم:

- **اگر درست حدس بزنید**، تیم شما امتیاز کسب می‌کند.
- **اگر اشتباه حدس بزنید**، تیم شما امتیاز از دست می‌دهد.

### توصیه مدیر بازی:

- **حدس‌های زیادی** بزنید.
- بر روی **اعداد کوچک** تمرکز کنید.

### نکته بهره‌برداری:

مولد اعداد تصادفی (RNG) احتمالاً **ضعیف یا قابل پیش‌بینی** است:
- منطق تولید عدد تصادفی قرارداد را مرور کنید (احتمالاً با استفاده از متغیرهای بلاک یا هش).
- به دنبال **بذرهای قابل پیش‌بینی** بگردید (مثل `block.timestamp`، `block.number`، `msg.sender` یا رمز عبور).
- از این الگوها برای **پیش‌محاسبه** یا **حمله brute-force** برای یافتن عدد صحیح استفاده کنید.

---

## بررسی قرارداد

### چگونه قرارداد را پیدا کنیم:

- از ابزارهای توسعه‌دهنده مرورگر (مثل برگه Network) در زمان تعامل با فرانت‌اند استفاده کنید.
- به دنبال موارد زیر بگردید:
  - درخواست‌های JSON-RPC (آدرس قرارداد در `eth_call` یا `eth_sendTransaction`)
  - تعریف‌های ABI و نقاط تعامل با قرارداد
- یا در **کاوشگرهای بلاک‌چین** (مثل [Sepolia Etherscan](https://sepolia.etherscan.io)) با استفاده از آدرس کیف پول تیم یا قراردادهای اخیر جستجو کنید.

### پس از یافتن قرارداد:

- کد قرارداد و ABI آن را تحلیل کنید.
- به دنبال آسیب‌پذیری‌های رایج باشید:
  - **RNG قابل پیش‌بینی**
  - **ذخیره‌سازی ناامن رمز عبور یا حدس‌ها**
  - **حمله بازگشتی (Reentrancy)**
  - **انتقال‌های بررسی‌نشده**
  - **مشکلات کنترل دسترسی**

---

## چالش اضافه: سرقت ETH

قرارداد مقداری **اتر به عنوان جایزه یا وثیقه** در خود نگه می‌دارد. ممکن است آسیب‌پذیری‌هایی وجود داشته باشد که به شما اجازه دهد:

- موجودی قرارداد را تخلیه کنید.
- مکانیزم امتیازدهی را دست‌کاری کنید.
- از بازپرداخت گاز، توابع fallback یا reentrancy سوءاستفاده کنید.

### نکات راهنما:
- به دنبال **توابع برداشت (withdraw)** بدون کنترل دسترسی مناسب باشید.
- بررسی کنید آیا می‌توانید **مرتباً عدد برنده را حدس بزنید** و باعث پرداخت ETH شوید.
- **حمله بازگشتی** را با استقرار قراردادی که به‌صورت بازگشتی با توابع آسیب‌پذیر تعامل دارد امتحان کنید.

---

## ابزارهای بهره‌برداری

می‌توانید از هرکدام از ابزارهای زیر برای اسکریپت‌نویسی و بهره‌برداری استفاده کنید:

- **Ethers.js** با اسکریپت Node.js سفارشی
- **Foundry** (`forge script`)
- تسک یا اسکریپت **Hardhat**
- **Remix IDE** (برای تعامل و تست سریع)
- **etherscan.io** (نوشتن روی قرارداد)

---

## نکات راهبردی

- **حدس‌های خودکار** با استفاده از اسکریپت ایجاد کنید.
- با همگام‌سازی داده‌های بلاک در اسکریپت، از **RNG قابل پیش‌بینی** بهره ببرید.
- با تیم خود **همکاری کنید** تا الگوهای حمله را بهینه کنید.
- **پیشرفت در جدول امتیازات** (در صورت وجود) را پیگیری کنید تا تیم‌های با امتیاز بالا را هدف قرار دهید.

---

## خلاصه

| اقدام                          | توضیحات                                                     |
|-------------------------------|--------------------------------------------------------------|
| ثبت‌نام تیم                  | نام، آدرس، رمز عبور را وارد کنید – هزینه 0.01 ETH          |
| حدس اعداد                    | اعداد کوچک پیشنهاد می‌شود – احتمال حمله brute-force وجود دارد |
| بررسی قرارداد                | RNG و آسیب‌پذیری‌ها را شناسایی کنید                         |
| استفاده از Flashbots/اسکریپت | برای تعامل سریع‌تر و پیش‌دستی بر سایر بازیکنان             |
| امتیاز اضافه: سرقت ETH       | نقص در منطق یا کنترل دسترسی را بیابید                        |

---

## سلب مسئولیت

این یک **بازی امنیتی** است که فقط با هدف آموزشی طراحی شده است. لطفاً **از انجام چنین تکنیک‌هایی روی قراردادهای واقعی یا در شبکه اصلی (mainnet)** خودداری کنید.
